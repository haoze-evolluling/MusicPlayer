<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>箜篌 - MusicPlayer</title>
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/responsive.css">
    <link rel="stylesheet" href="./css/animations.css">
    <script src="../node_modules/jquery/dist/jquery.min.js"></script>
    <style>
        /* 移除测试图片样式 */
    </style>
</head>
<body>
    <!-- 移除测试图片元素 -->
    
    <div class="app-container">
        <!-- 侧边栏 -->
        <div class="sidebar">
            <div class="app-header">
                <div class="logo">
                    <img src="./assets/logo.png" alt="箜篌">
                    <h1>箜篌 - MusicPlayer</h1>
                </div>
                <div class="nav-tabs">
                    <button class="tab-btn active" data-tab="now-playing">正在播放</button>
                    <button class="tab-btn" data-tab="search">音乐库</button>
                </div>
            </div>
            
            <!-- 内容区 -->
            <div class="tab-content active" id="now-playing">
                <h2>当前播放列表</h2>
                <ul class="current-playlist"></ul>
            </div>
            
            <div class="tab-content" id="search">
                <div class="search-box">
                    <input type="text" id="search-input" placeholder="输入路径(留空显示根目录)...">
                    <button id="search-btn">加载</button>
                    <div class="source-selector">
                        <label>
                            <input type="radio" name="source" value="github" checked> GitHub
                        </label>
                        <label>
                            <input type="radio" name="source" value="local"> 本地音乐
                        </label>
                        <button id="set-repo-btn" class="repo-settings-btn">设置仓库</button>
                        <button id="select-folder-btn" class="repo-settings-btn" style="display:none;">选择文件夹</button>
                    </div>
                </div>
                <div class="search-results"></div>
            </div>
        </div>
        
        <!-- 侧边栏折叠按钮 - 改进版 -->
        <button id="sidebar-toggle" class="sidebar-toggle-btn" aria-label="折叠/展开侧边栏" tabindex="0" title="折叠/展开侧边栏">
            <span class="toggle-icon"></span>
        </button>
        
        <!-- 右侧区域：播放器主区域 -->
        <div class="main-player">
            <div class="player-content">
                <div class="music-info-container">
                    <div class="album-cover">
                        <img src="./assets/default-cover.png" alt="封面" id="current-cover">
                    </div>
                    <div class="song-info">
                        <h2 id="current-title">请选择音乐</h2>
                        <p id="current-artist"></p>
                    </div>
                </div>
                
                <!-- 歌词区域 -->
                <div class="lyrics-container">
                    <div class="lyrics-wrapper">
                        <div class="lyrics-content"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 底部控制栏 -->
        <div class="player-controls">
            <div class="control-buttons">
                <button id="prev-btn" class="ctrl-btn"><img src="./assets/prev.svg" alt="上一首"></button>
                <button id="play-btn" class="ctrl-btn"><img src="./assets/play.svg" alt="播放"></button>
                <button id="next-btn" class="ctrl-btn"><img src="./assets/next.svg" alt="下一首"></button>
                <button id="loop-btn" class="ctrl-btn" data-mode="list"><img src="./assets/repeat.svg" alt="循环"></button>
            </div>
            
            <div class="progress-container">
                <span id="current-time">00:00</span>
                <div class="progress-bar">
                    <div class="progress"></div>
                </div>
                <span id="total-time">00:00</span>
            </div>
            
            <div class="volume-controls">
                <button id="mute-btn" class="ctrl-btn"><img src="./assets/volume.svg" alt="音量"></button>
                <div class="volume-bar">
                    <div class="volume-level"></div>
                </div>
                <div class="playback-speed">
                    <select id="speed-select">
                        <option value="0.5">0.5x</option>
                        <option value="0.75">0.75x</option>
                        <option value="1" selected>1.0x</option>
                        <option value="1.25">1.25x</option>
                        <option value="1.5">1.5x</option>
                        <option value="2">2.0x</option>
                        <option value="3">3.0x</option>
                        <option value="4">4.0x</option>
                    </select>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 设置按钮和弹窗 -->
    <button id="settings-btn" class="floating-btn"><img src="./assets/settings.svg" alt="设置"></button>
    
    <!-- 音频元素 -->
    <audio id="audio-player"></audio>
    
    <!-- 设置面板 -->
    <div id="settings-panel" class="settings-overlay">
        <div class="settings-content">
            <h2>设置</h2>
            <!-- 背景设置区域将由JS动态插入 -->
            <div class="settings-section">
                <h3>关于</h3>
                <p>箜篌音乐播放器 v6.26.3</p>
                <p>功能丰富的在线音乐播放器</p>
            </div>
            <button id="close-settings">关闭</button>
        </div>
    </div>

    
    <!-- 脚本加载顺序很重要，确保依赖关系正确 -->
    <script src="./js/config.js"></script>
    <script src="./js/repo-api.js"></script>
    <script src="./js/localmusic.js"></script>
    <script src="./js/background.js"></script>
    <script src="./js/bg-init.js"></script>
    <!-- 先加载UI管理器 -->
    <script src="./js/ui.js"></script>
    <script src="./js/lyrics.js"></script>
    <script src="./js/player.js"></script>
    <script src="./js/playlist.js"></script>
    <script src="./js/search.js"></script>
    <!-- 响应式功能增强 -->
    <script src="./js/responsive.js"></script>
    <!-- 最后加载应用主入口 -->
    <script src="./js/app.js"></script>
</body>
</html> 